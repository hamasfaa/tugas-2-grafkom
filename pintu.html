<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGL Hierarchical Door with Lighting</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        canvas {
            display: block;
            border: 2px solid #fff;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        #controls {
            margin-top: 20px;
            padding: 20px 30px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        label {
            font-weight: 600;
            color: #333;
        }
        input[type="range"] {
            width: 300px;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        span {
            font-weight: 600;
            color: #667eea;
            min-width: 35px;
        }
    </style>
</head>
<body>

    <canvas id="gl-canvas" width="800" height="600">
        Your browser does not support the HTML5 canvas element.
    </canvas>

    <div id="controls">
        <label for="doorAngle">ðŸšª Push Door:</label>
        <input type="range" id="doorAngle" min="0" max="90" value="0">
        <span id="angleValue">0Â°</span>
    </div>

    <!-- Vertex Shader with Lighting -->
    <script id="vertex-shader" type="x-shader/x-vertex">
        attribute vec4 vPosition;
        attribute vec4 vColor;
        attribute vec3 vNormal;
        
        uniform mat4 modelViewProjectionMatrix;
        uniform mat4 normalMatrix;
        
        varying vec4 fColor;
        varying vec3 fNormal;
        varying vec3 fPosition;
        
        void main() {
            gl_Position = modelViewProjectionMatrix * vPosition;
            fColor = vColor;
            fNormal = normalize((normalMatrix * vec4(vNormal, 0.0)).xyz);
            fPosition = (normalMatrix * vPosition).xyz;
        }
    </script>

    <!-- Fragment Shader with Phong Lighting -->
    <script id="fragment-shader" type="x-shader/x-fragment">
        precision mediump float;
        
        varying vec4 fColor;
        varying vec3 fNormal;
        varying vec3 fPosition;
        
        uniform vec3 lightPosition;
        uniform vec3 ambientLight;
        uniform vec3 diffuseLight;
        uniform vec3 specularLight;
        uniform float shininess;
        
        void main() {
            vec3 N = normalize(fNormal);
            vec3 L = normalize(lightPosition - fPosition);
            vec3 V = normalize(-fPosition);
            vec3 H = normalize(L + V);
            
            // Ambient
            vec3 ambient = ambientLight * fColor.rgb;
            
            // Diffuse
            float diffuseFactor = max(dot(N, L), 0.0);
            vec3 diffuse = diffuseFactor * diffuseLight * fColor.rgb;
            
            // Specular
            float specularFactor = pow(max(dot(N, H), 0.0), shininess);
            vec3 specular = specularFactor * specularLight;
            
            vec3 finalColor = ambient + diffuse + specular;
            gl_FragColor = vec4(finalColor, fColor.a);
        }
    </script>

    <script src="initShaders.js"></script>
    <script src="MVnew.js"></script>
    <script src="pintu.js"></script>

</body>
</html>